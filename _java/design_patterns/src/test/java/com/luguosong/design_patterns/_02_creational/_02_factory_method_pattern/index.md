---
layout: default
title: 工厂方法
nav_order: 20
parent: 创建型模式
grand_parent: 设计模式（Design Pattern）
---

# 定义

{: .new-title}
> 工厂方法
> 
> `工厂方法`是一种`创建型设计模式`，其在父类中提供一个创建对象的方法，允许子类决定实例化对象的类型。

# 结构

![](https://cdn.jsdelivr.net/gh/guosonglu/images@master/blog-img/20221220225026.png)

- `产品（Product）`将会对接口进行声明。对于所有由创建者及其子类构建的对象，这些接口都是通用的。
- `具体产品（Concrete Products）`是产品接口的不同实现。
- `创建者（Creator）`类声明返回产品对象的工厂方法。该方法的返回对象类型必须与产品接口相匹配。

{: .note}
> 你可以将工厂方法声明为抽象方法，强制要求每个子类以不同方式实现该方法。或者，你也可以在基础工厂方法中返回默认产品类型。

{: .warning}
> 尽管它的名字是创建者，但它最主要的职责并不是创建产品。一般来说，创建者类包含一些与产品相关的核心业务逻辑。工厂方法将这些逻辑处理从具体产品类中分离出来。打个比方，大型软件开发公司拥有程序员培训部门。但是，这些公司的主要工作还是编写代码，而非生产程序员。

- `具体创建者（ConcreteCreators）`将会重写基础工厂方法，使其返回不同类型的产品。

{: .warning}
> 并不一定每次调用工厂方法都会创建新的实例。工厂方法也可以返回缓存、对象池或其他来源的已有对象。


# 遵循的设计原则

- `开闭原则（Open-Closed Principle）`：工厂方法允许拓展系统而不需要修改代码，只需要添加新的工厂方法即可。
- `依赖倒置原则（Dependency Inversion Principle）`：工厂方法将创建对象的职责委托给子类，只需要调用子类的工厂方法，这样可以降低代码的耦合度。
- `单一职责原则（Single Responsibility Principle）`：工厂方法中的各个子类负责创建不同类型的对象，这样可以确保代码的可读性和可维护性。
- `接口隔离原则（Interface Segregation Principle）`：工厂方法可以使用接口来隔离各个子类，这样可以确保系统的松耦合。
